#!/usr/bin/env node
const { spawn } = require("child_process");
const path = require("path");

const args = process.argv.slice(2);

const binPath = process.platform === "win32"
  ? path.join(__dirname, "..", ".npm-venv", "Scripts", "mycontext.exe")
  : path.join(__dirname, "..", ".npm-venv", "bin", "mycontext");

const child = spawn(binPath, args, { stdio: "inherit" });

child.on("error", (err) => {
    console.error(`\nError: Could not execute the Python script.`);
    console.error(`Attempted path: ${binPath}`);
    console.error(`Make sure the installation with 'npm install' completed successfully.`);
    console.error(`Error details:`, err);
    process.exit(1);
});

child.on("exit", code => process.exit(code));